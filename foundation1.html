<!doctype html>
<html lang="en">

<head>
	<title>PCF Dashboard</title>
	<!-- =============== VENDOR STYLES ===============-->
	<!-- FONT AWESOME-->
	<link rel="stylesheet" href="app/vendor/font-awesome/css/font-awesome.css">
	<!-- SIMPLE LINE ICONS-->
	<link rel="stylesheet" href="app/vendor/simple-line-icons/css/simple-line-icons.css">
	<!-- ANIMATE.CSS-->
	<link rel="stylesheet" href="app/vendor/animate.css/animate.css">
	<!-- WHIRL (spinners)-->
	<link rel="stylesheet" href="app/vendor/whirl/dist/whirl.css">
	<!-- =============== PAGE VENDOR STYLES ===============-->
	<!-- BOOTSTRAP -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	    crossorigin="anonymous" id="bscss">
	<!-- =============== APP STYLES ===============-->
	<link rel="stylesheet" href="app/css/app.css" id="maincss">

	<!-- =============== VENDOR SCRIPTS ===============-->
	<!-- MODERNIZR-->
	<script src="app/vendor/modernizr/modernizr.custom.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
	<!-- JQUERY-->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

	<script language="JavaScript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<script language="JavaScript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
	    crossorigin="anonymous"></script>
	<!-- BOOTSTRAP-->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
	    crossorigin="anonymous"></script>
	<!-- STORAGE API-->
	<script src="app/vendor/js-storage/js.storage.js"></script>
	<!-- JQUERY EASING-->
	<script src="app/vendor/jquery.easing/jquery.easing.js"></script>
	<!-- ANIMO-->
	<script src="app/vendor/animo/animo.js"></script>
	<!-- SCREENFULL-->
	<script src="app/vendor/screenfull/dist/screenfull.js"></script>
	<!-- =============== PAGE VENDOR SCRIPTS ===============-->
	<!-- SLIMSCROLL-->
	<script src="app/vendor/jquery-slimscroll/jquery.slimscroll.js"></script>
	<!-- SPARKLINE-->
	<script src="app/vendor/jquery-sparkline/jquery.sparkline.js"></script>
	<!-- FLOT CHART-->
	<script src="app/vendor/flot/jquery.flot.js"></script>
	<script src="app/vendor/jquery.flot.tooltip/js/jquery.flot.tooltip.js"></script>
	<script src="app/vendor/flot/jquery.flot.resize.js"></script>
	<script src="app/vendor/flot/jquery.flot.pie.js"></script>
	<script src="app/vendor/flot/jquery.flot.time.js"></script>
	<script src="app/vendor/flot/jquery.flot.categories.js"></script>
	<script src="app/vendor/jquery.flot.spline/jquery.flot.spline.js"></script>
	<!-- EASY PIE CHART-->
	<script src="app/vendor/easy-pie-chart/dist/jquery.easypiechart.js"></script>
	<!-- MOMENT JS-->
	<script src="app/vendor/moment/min/moment-with-locales.js"></script>
	<!-- VECTOR MAP-->
	<script src="app/vendor/ika.jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
	<script src="app/vendor/ika.jvectormap/jquery-jvectormap-world-mill-en.js"></script>
	<script src="app/vendor/ika.jvectormap/jquery-jvectormap-us-mill-en.js"></script>
	<!-- =============== APP SCRIPTS ===============-->
	<script src="utils.js"></script>
	<script src="analyser.js"></script>
	<!-- =============== APP SCRIPTS ===============-->
	<script src="app/js/app.js"></script>
	<style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}
	</style>
</head>


<body>
	<div class="wrapper">
		<!-- top navbar-->
		<header class="topnavbar-wrapper">
			<!-- START Top Navbar-->
			<nav class="navbar topnavbar" role="navigation">
				<!-- START navbar header-->
				<div class="navbar-header">
					<a class="navbar-brand" href="#/">
						<div class="brand-logo">
							<img class="img-fluid" src="app/img/pcf.png" alt="App Logo">
						</div>
						<div class="brand-logo-collapsed">
							<img class="img-fluid" src="app/img/logo-single.png" alt="App Logo">
						</div>
					</a>
				</div>
				<!-- END navbar header-->
				<!-- START Left navbar-->
				<ul class="navbar-nav mr-auto flex-row">

					<!-- START lock screen-->
					<li class="nav-item d-none d-md-block">
						<a class="nav-link dropdown-toggle dropdown-toggle-nocaret" href="#" data-toggle="dropdown">
							<em class="icon-organization fa-lg"></em>
						</a>

						<!-- START Dropdown menu-->
						<div class="dropdown-menu dropdown-menu-right animated flipInX">
							<div class="dropdown-item">
								<!-- START list group-->
								<div class="list-group">
									<!-- list item-->
									<div class="list-group-item list-group-item-action">
										<div class="media">
											<div class="align-self-start mr-2">
												<em class="fa tachometer-alt fa-2x text-info"></em>
											</div>
											<div class="media-body">
												<p class="m-0">Overview</p>
												<p class="m-0 text-muted text-sm">Consolidated view of foundations</p>
											</div>
										</div>
									</div>
									<!-- list item-->
									<div class="list-group-item list-group-item-action">
										<div class="media">
											<div class="align-self-start mr-2">
												<em class="fa sitemap fa-2x text-warning"></em>
											</div>
											<div class="media-body">
												<p class="m-0" href="foundation1.html">Foundation: 1</p>
												<!-- <p class="m-0 text-muted text-sm">You have 10 new emails</p> -->
											</div>
										</div>
									</div>
									<!-- list item-->
									<div class="list-group-item list-group-item-action">
										<div class="media">
											<div class="align-self-start mr-2">
												<em class="fa fa-tasks fa-2x text-success"></em>
											</div>
											<div class="media-body">
												<p class="m-0" href="foundation1.html">Foundation: 2</p>
												<!-- <p class="m-0 text-muted text-sm">11 pending task</p> -->
											</div>
										</div>
									</div>
								</div>
								<!-- END list group-->
							</div>
						</div>
						<!-- END Dropdown menu-->
					</li>
				</ul>
				<!-- END Left navbar-->

				<!-- START Right Navbar-->
				<ul class="navbar-nav flex-row">
					<!-- Search icon-->
					<li class="nav-item">
						<a class="nav-link" href="#" data-search-open="">
							<em class="icon-magnifier"></em>
						</a>
					</li>
					<!-- Fullscreen (only desktops)-->
					<li class="nav-item d-none d-md-block">
						<a class="nav-link" href="#" data-toggle-fullscreen="">
							<em class="fa fa-expand"></em>
						</a>
					</li>
				</ul>
				<!-- END Right Navbar-->
				<!-- START Search form-->
				<form class="navbar-form" role="search" action="app/search.html">
					<div class="form-group">
						<input class="form-control" type="text" placeholder="Type and hit enter ...">
						<div class="fa fa-times navbar-form-close" data-search-dismiss=""></div>
					</div>
					<button class="d-none" type="submit">Submit</button>
				</form>
				<!-- END Search form-->
			</nav>
			<!-- END Top Navbar-->
		</header>


		<!-- Main section-->
		<!-- <section> -->

		<script>
			// TODO: Import in json from S3 rather than local
			// $.getJSON('https://s3.eu-west-2.amazonaws.com/redwards-tf-test/pcf-demo-lab-usage-from-2018-01-01-to-2018-01-31_1518642497.json', function(data) {

			$.getJSON("data.json", function (data) {

				var numberAI = data.total_app_instance_count;
				var totalMemory = data.total_app_memory_used_in_mb + " MB";
				var totalDisk = data.total_disk_quota_in_mb + " MB";

				var foundationName = "Foundation: " + data.pcf_deploy_name;

				document.getElementById("numberAI").innerHTML = numberAI;
				// TODO: Auto calcualte the value for services
				document.getElementById("services").innerHTML = 67;
				document.getElementById("memory").innerHTML = totalMemory;
				document.getElementById("disk").innerHTML = totalDisk;

				document.getElementById("heading").innerHTML = foundationName;
			});
		</script>

		<!-- Page content-->
		<div class="content-wrapper">
			<div class="content-heading" id="heading"></div>
			<div class="row">
				<!-- START card: Foundation Application Instances-->
				<div class="col-xl-3 col-md-6">
					<div class="card bg-info-light pt-2 b0">
						<div class="px-2">
							<em class="icon-cloud-upload fa-lg float-right"></em>
							<div class="h2 mt-0" id="numberAI">1700</div>
							<div class="text-uppercase">Applications</div>
						</div>
						<div data-sparkline="" data-type="line" data-width="100%" data-height="75px" data-line-color="#23b7e5" data-chart-range-min="0"
						    data-fill-color="#23b7e5" data-spot-color="#23b7e5" data-min-spot-color="#23b7e5" data-max-spot-color="#23b7e5" data-highlight-spot-color="#23b7e5"
						    data-highlight-line-color="#23b7e5" values="56,105,106,130,128,132" style="margin-bottom: -2px;" data-resize="true">
						</div>
					</div>
				</div>
				<!-- START card: Services Used-->
				<div class="col-xl-3 col-md-6">
					<div class="card bg-purple-light pt-2 b0">
						<div class="px-2">
							<em class="icon-wrench fa-lg float-right"></em>
							<div class="h2 mt-0" id="services"></div>
							<div class="text-uppercase">Services</div>
						</div>
						<div data-sparkline="" data-type="line" data-width="100%" data-height="75px" data-line-color="#7266ba" data-chart-range-min="0"
						    data-fill-color="#7266ba" data-spot-color="#7266ba" data-min-spot-color="#7266ba" data-max-spot-color="#7266ba" data-highlight-spot-color="#7266ba"
						    data-highlight-line-color="#7266ba" values="1,4,5,4,8,7,10" style="margin-bottom: -2px;" data-resize="true"></div>
					</div>
				</div>
				<!-- START card: Foundation Memory Usage-->
				<div class="col-xl-3 col-lg-6 col-md-12">
					<div class="card bg-info-light pt-2 b0">
						<div class="px-2">
							<em class="icon-power fa-lg float-right"></em>
							<div class="h2 mt-0" id="memory"></div>
							<div class="text-uppercase">Memory</div>
						</div>
						<div data-sparkline="" data-type="line" data-width="100%" data-height="75px" data-line-color="#23b7e5" data-chart-range-min="0"
						    data-fill-color="#23b7e5" data-spot-color="#23b7e5" data-min-spot-color="#23b7e5" data-max-spot-color="#23b7e5" data-highlight-spot-color="#23b7e5"
						    data-highlight-line-color="#23b7e5" values="4,5,3,10,7,15" style="margin-bottom: -2px;" data-resize="true"></div>
					</div>
				</div>
				<!-- START card: Foundation Disk Uages-->
				<div class="col-xl-3 col-lg-6 col-md-12">
					<div class="card bg-purple-light pt-2 b0">
						<div class="px-2">
							<em class="icon-disc fa-lg float-right"></em>
							<div class="h2 mt-0" id="disk"></div>
							<div class="text-uppercase">Disk</div>
						</div>
						<div data-sparkline="" data-type="line" data-width="100%" data-height="75px" data-line-color="#7266ba" data-chart-range-min="0"
						    data-fill-color="#7266ba" data-spot-color="#7266ba" data-min-spot-color="#7266ba" data-max-spot-color="#7266ba" data-highlight-spot-color="#7266ba"
						    data-highlight-line-color="#7266ba" values="1,3,4,5,7,8" style="margin-bottom: -2px;" data-resize="true"></div>
					</div>
				</div>
			</div>
			<!-- END cards box-->
			<!-- <div class="card-deck mb-3 text-center">
			<div class="card mb-4 box-shadow">
				<div class="card-header">
					<h4 class="my-0 font-weight-normal">App Instances</h4>
				</div>
				<div class="card-body">
					<h1 class="card-title pricing-card-title" id="numberAI"></h1>
					<button type="button" class="btn btn-lg btn-block btn-outline-primary">Details</button>
				</div>
			</div>
			<div class="card mb-4 box-shadow">
				<div class="card-header">
					<h4 class="my-0 font-weight-normal">Services</h4>
				</div>
				<div class="card-body">
					<h1 class="card-title pricing-card-title">23</h1>
					<button type="button" class="btn btn-lg btn-block btn-primary">Details</button>
				</div>
			</div> -->

			<!-- START card-->
			<!-- <div class="col-xl-3 col-md-4"> -->
			<!-- <div class="card flex-row align-items-center align-items-stretch border-0">
		<div class="col-4 d-flex align-items-center bg-purple-dark justify-content-center rounded-left">
		<em class="icon-globe fa-3x"></em>
		</div>
		<div class="col-8 py-3 bg-purple rounded-right">
		<div class="h2 mt-0" id="numberAI"></div>
		<div class="text-uppercase">Applications</div>
		</div>
</div> -->
			<!-- </div> -->
			<!-- <div class="col-xl-3 col-lg-6 col-md-12"> -->
			<!-- START card-->
			<!-- <div class="card flex-row align-items-center align-items-stretch border-0">
	<div class="col-4 d-flex align-items-center bg-green-dark justify-content-center rounded-left">
	<em class="icon-bubbles fa-3x"></em>
	</div>
	<div class="col-8 py-3 bg-green rounded-right">
	<div class="h2 mt-0" id="services"></div>
	<div class="text-uppercase">Services</div>
	</div> -->
			<!-- </div> -->
			<!-- </div> -->

			<!-- START dashboard sidebar-->
			<aside class="col-xl-3">
				<!-- START loader widget-->
				<div class="card card-default">
					<div class="card-body">
						<a class="text-muted float-right" href="#">
							<em class="fa fa-arrow-right"></em>
						</a>
						<div class="text-info">Buildpack Usage</div>
						<div class="text-center py-4">


							<div style="width:100%;">
								<canvas id="chart-0"></canvas>

							</div>





						</div>

					</div>

				</div>
			</aside>
			<!-- END loader widget-->






			<div id="chart-analyser" class="analyser"></div>
			<!-- </div> -->

			<script>
				var buildPacksName = [];
				var buildPacksUsed = [];
				$.getJSON("data.json", function (data) {

					for (i in data.buildpack_usages) {
						buildPacksName.push(data.buildpack_usages[i].name);
						buildPacksUsed.push(data.buildpack_usages[i].instances);
					}

					var presets = window.chartColors;
					var utils = Samples.utils;

					var options = {
						maintainAspectRatio: true,
						spanGaps: false,
						title: {
							display: true,
							text: 'Buildpack Usage'
						},
						elements: {
							line: {
								tension: 0.000001
							}
						}
					};


					var radarData = {
						labels: buildPacksName,
						datasets: [{
							backgroundColor: utils.transparentize(presets.blue),
							lineTension: 0.4,
							borderColor: presets.blue,
							data: buildPacksUsed,
							label: "Current"
						}]
					};


					var myRadarChart = new Chart('chart-0', {
						type: 'radar',
						data: radarData,
						options: options
					});
				});
			</script>

			<script>
				// TODO: Hack to get HTML canvas to display correctly on page - this needs to be cleaned up by someone that knows js :-)
				var str = '';
				$.getJSON("data.json", function (json) {
					for (o in json.organizations) {
						var orgName = json.organizations[o].name;
						str += "<div><canvas id=" + orgName + "></canvas></div>";
					}
					document.getElementById('example').innerHTML = str;
				});
			</script>

			<div style="width:75%;" id="example"></div>

			<script>
				$.getJSON("data.json", function (json) {
					for (o in json.organizations) {
						var orgName = json.organizations[o].name;
						var spaceName = [];
						var spaceInstances = [];

						for (s in json.organizations[o].spaces) {
							spaceName.push(json.organizations[o].spaces[s].name);
							spaceInstances.push(json.organizations[o].spaces[s].total_app_instance_count);
						}

						var color = Chart.helpers.color;

						var options = {
							maintainAspectRatio: true,
							spanGaps: false,
							title: {
								display: true,
								text: 'Organisation: ' + orgName
							},
							legand: {
								display: false
							},
							elements: {
								line: {
									tension: 0.000001
								}
							}
						};

						var data = {
							labels: spaceName,
							datasets: [{
								label: orgName,
								backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
								borderColor: window.chartColors.red,
								borderWidth: 1,
								data: spaceInstances
							}]
						};

						var canvas = document.getElementById(orgName);
						var ctx = canvas.getContext("2d");
						new Chart(ctx, {
							type: 'horizontalBar',
							data: data,
							options: options
						});

					};
				});
			</script>
		</div>
		<!-- </div> -->


		<!-- Page footer-->
		<footer>
			<span>Visit of Githubk</span>
		</footer>
	</div>



</body>

</html>